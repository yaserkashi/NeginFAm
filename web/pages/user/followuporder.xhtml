<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="../../template/usertemplate.xhtml">
    <ui:define name="content">
        <p:dataTable value="#{orderFollowUpForUser.listOfOrdreForUser()}" var="followup"
                     styleClass="dataTable" id="followtb" rowKey="#{followup.id}">
            <p:column headerText="نوع سفارش" filterBy="#{followup.tableName}">
                <h:outputText value="#{followup.tableName}" />
            </p:column> 
            <p:column headerText="ردیف">
                <h:outputText value="#{orderFollowUpForUser.listOfOrdreForUser().indexOf(followup)+1}" />
            </p:column>  
            <p:column headerText="شماره سفارش">
                <h:outputText value="#{followup.id}" />
            </p:column>  

            <p:column headerText="وضعیت" filterBy="#{followup.condition}">
                <h:outputText value="#{followup.condition}"/>
            </p:column>
            <p:column headerText="مشاهده سفارش" style="width:32px;text-align: center">
                <p:commandButton icon="ui-icon-search"  action="#{orderFollowUpForUser.selectedOrderAction()}"  title="View">
                    <f:setPropertyActionListener value="#{followup}" target="#{orderFollowUpForUser.selectedOreder}" />
                </p:commandButton>
            </p:column>
            <p:column headerText="مشاهده فاکتور" style="width:32px;text-align: center">
                <p:commandButton icon="ui-icon-search"  action="#{orderFollowUpForUser.showFactorForSelectedOrder()}"  title="View">
                    <f:setPropertyActionListener value="#{followup}" target="#{orderFollowUpForUser.selectedOreder}" />
                </p:commandButton>
            </p:column>
            <p:column rendered="true" headerText="دانلود فایل نهایی" style="width:32px;text-align: center">
                <p:commandButton icon="ui-icon-search" disabled="true"  action="#{orderFollowUpForUser.selectedOrderAction()}"  title="View">
                    <f:setPropertyActionListener value="#{followup}" target="#{orderFollowUpForUser.selectedOreder}" />
                </p:commandButton>
            </p:column>
            <p:column headerText="لغو سفارش" style="width:32px;text-align: center">
                <p:commandButton icon="ui-icon-search"  action="#{orderFollowUpForUser.cancelOrder()}"  title="View">
                    <f:setPropertyActionListener value="#{followup}" target="#{orderFollowUpForUser.selectedOreder}" />
                </p:commandButton>
            </p:column>
        </p:dataTable>    
        <p:dataTable value="#{orderFollowUpForUser.listOfOrdreForUser()}" var="followup"
                     styleClass="dataTable" id="followtb11" rowKey="#{followup.id}">
            <p:column headerText="نوع سفارش" filterBy="#{followup.tableName}">
                <h:outputText value="#{followup.tableName}" />
            </p:column> 
            <p:column headerText="ردیف">
                <h:outputText value="#{orderFollowUpForUser.listOfOrdreForUser().indexOf(followup)+1}" />
            </p:column>  
            <p:column headerText="شماره سفارش">
                <h:outputText value="#{followup.id}" />
            </p:column>  

            <p:column headerText="وضعیت" filterBy="#{followup.condition}">
                <h:outputText value="#{followup.condition}"/>
            </p:column>
            <p:column headerText="مشاهده سفارش" style="width:32px;text-align: center">
                <p:commandButton icon="ui-icon-search" update=":userForm:aaaea" onclick="PF('caraDialog').show();" title="View">
                    <f:setPropertyActionListener value="#{followup}" target="#{orderFollowUpForUser.selectedOreder}" />
                </p:commandButton>
            </p:column>
        </p:dataTable>    
        <p:remoteCommand name="s" action="#{orderFollowUpForUser.yaser()}" />

        <p:dialog header="اطلاعات کاربر" widgetVar="caraDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <p:outputPanel id="aaaea" style="text-align:center;">
                <p:outputPanel  rendered="#{not empty orderFollowUpForUser.selectedOreder}">
                    <p:inputText value="#{orderFollowUpForUser.selectedOreder.id}" />
                    <p:commandButton value="مشاهده فکتور" oncomplete="alert();
                                      s([{name: 'msg', value: 'ss'}]);" action="#{orderFollowUpForUser.yaser()}"/>
                </p:outputPanel>
            </p:outputPanel>
        </p:dialog>
    </ui:define>
</ui:composition> 